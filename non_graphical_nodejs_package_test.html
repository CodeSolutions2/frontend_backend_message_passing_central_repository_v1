<!DOCTYPE html>
<html>
<head></head>
<body>

<button class="buttonClass" id="create_a_file_in_repo" type="button" style="display:none;"></button>
	
<!-- --------------------------------------------------- -->

<script type="module" src="./index.js"></script>

<!-- --------------------------------------------------- -->
	
<script>

// -----------------------------------------------

// Force the page to refresh the cached webpage
window.addEventListener('beforeunload', function() {
 	window.location.href = window.location.href + '?nocache=' + new Date().getTime();
});

// -----------------------------------------------

document.getElementById("create_a_file_in_repo").addEventListener("click", async () => {

	await create_a_file_in_repo()
		.then(async function() {
			// Step 3: Frontend = make the button [be found in the DOM or to be NOT hidden] to make the Backend detect that the Frontend is finished
			 await setTimeout(function() { document.getElementById("create_a_file_in_repo").style.display = 'block'; }, 300);
		})
		.then(function() {
			// Step 4: Frontend = continue to ensure that the button non-visible (style="display:none;")
			document.getElementById("create_a_file_in_repo").style.display = 'none';
		})
	
});

	
// ----------------------------------------------------

async function create_a_file_in_repo() {
	
   
	var RepoAobj = {};
	RepoAobj.repoOwner = 'CodeSolutions2';
	RepoAobj.repoA_name = 'library_encryption_class';
	RepoAobj.foldername = '.github'; // foldername in RepoB
	RepoAobj.repoB_name = 'library_encryption_class';
	RepoAobj.type_of_encryption = "salt_scramble";
   
	RepoAobj.input_text = 'some text';
	
	// Save the encrypted string to the .public_window_crypto_subtle
	RepoAobj.filename = 'output'; // filename to create in RepoB, in foldername
	await run_backend_process(RepoAobj);
   
	// -----------------------------
	
}

// ----------------------------------------------------

</script>
</body>
</html>
